<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
	  <style>

	  </style>
	</head>
  <body>
    <script>

      $(document).ready(function(){
	    var $body = $('body');
		var $messages = $('.messages');
		var $refresh = $('.refresh');
        var index;

        display();
				
		$refresh.on('click', function() {
		  $messages.text('');
		  display();
		});

        function display() {
          index = streams.home.length - 1;
          while(index >= 0){
		    var tweet = streams.home[index];
		    var time = convert(new Date() - tweet.created_at);
		    var $tweet = $('<div></div>');

			$tweet.text('@' + tweet.user + ' ' + time + ' ' + tweet.message);

		 	$messages.append($tweet);

			index -= 1;
          }
		}
				
		function convert(time) {
		  time = Math.floor(time/1000);
		  if(time === 0) return 'now';
		  if(time < 60) return time + 's ';
		  if(time < 3600) return Math.floor(time/60) + 'm ';
		  if(time < 86400) return Math.floor(time/3600) + 'h ';
		  return Math.floor(time/86400) + 'd ';
		}

      });

	</script>
	<h2>Twittler</h2>

	<button class="refresh" enabled>refresh</button>
		

	<span class="messages"></span>
  
  </body>
</html>
