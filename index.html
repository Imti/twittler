<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
	  <style>
        .username {font-size: 15px; color: black; font-weight: bold;}
        .timestamp {font-size: 14px; color: gray; font-weight: normal;}
        .tweet {font-size: 16px; color: black; font-weight: normal;}
	  </style>
	</head>
  <body>
    <script>

      $(document).ready(function(){
	    var $body = $('body');
		var $messages = $('.messages');
		var $refresh = $('.refresh');
        var index;

        display();
		
		$refresh.on('click', function() {
		  $messages.text('');
		  display();
		});

        function display() {
          index = streams.home.length - 1;
          while(index >= 0){
		    var tweet = streams.home[index];
		    var time = convert(new Date() - tweet.created_at);
            
            var $user = "<span class='username'>" + "@" +tweet.user + "<span>"
		    var $time = "<span class='timestamp'>" + "- " + time + "<span>";
		    var $tweet = "<span class= 'tweet'>" + tweet.message + "<span>"

            //$tweet.text('@' + tweet.user + ' ' + time + ' ' + tweet.message);

		    $messages.append("<br>" + $user + ' ' + $time + "<br>" + $tweet + "<br>");

		    index -= 1;
          }
		}
		
		function convert(time) {
		  time = Math.floor(time/1000);
		  if(time === 0) return 'now';
		  if(time < 60) return time + 's ';
		  if(time < 3600) return Math.floor(time/60) + 'm ';
		  if(time < 86400) return Math.floor(time/3600) + 'h ';
		  return Math.floor(time/86400) + 'd ';
		}

      });

	</script>
	<h2>Twittler</h2>

	<button class="refresh" enabled>refresh</button>
		

	<span class="messages"></span>
  </body>
</html>
